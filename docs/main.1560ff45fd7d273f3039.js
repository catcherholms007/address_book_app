(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{68:function(e,t,n){"use strict";n.r(t);var r=n(0),o=n.n(r),i=n(6),a=n.n(i),c=n(2),u=(n(33),n(28)),l=n.n(u);n(34);function s(e){return(s="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return!t||"object"!==s(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var h=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),p(this,y(t).apply(this,arguments))}var n,i,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(t,o.a.Component),n=t,(i=[{key:"render",value:function(){return o.a.createElement(r.Fragment,null,this.props.pageStore.status)}}])&&f(n.prototype,i),a&&f(n,a),t}(),m=Object(c.b)("pageStore")(Object(c.c)(h));var v=function(){return o.a.createElement("header",{className:"App-header"},o.a.createElement("h1",{className:"App-title"},"My Address Book ",o.a.createElement(m,null)))},d=n(11),g=n.n(d),w=n(10),O=n.n(w),j=n(26),_=n.n(j),E=n(4);function S(e){return(S="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var R=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=P(t).call(this,e))||"object"!==S(o)&&"function"!==typeof o?z(r):o).state={value:"",error:!1},n.onChange=n.onChange.bind(z(z(n))),n.isValid=n.isValid.bind(z(z(n))),n}var n,r,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(t,o.a.Component),n=t,(r=[{key:"validate",value:function(e){return!0}},{key:"isValid",value:function(){var e=this.validate(this.state.value);return this.setState({error:!e}),e}},{key:"onChange",value:function(e){var t=this;this.setState({value:e.target.value},function(){t.isValid()})}},{key:"value",get:function(){return this.state.value},set:function(e){this.setState({value:e})}}])&&k(n.prototype,r),i&&k(n,i),t}();n(37);function N(e){return(N="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t){return!t||"object"!==N(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var L=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),T(this,x(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(t,R),n=t,(r=[{key:"validate",value:function(e){return""!==e}},{key:"render",value:function(){var e="contact-form__name ".concat(this.state.error?"contact-form__name_error":"");return o.a.createElement("input",{className:e,name:"name",value:this.state.value,type:"text",required:!0,onChange:this.onChange,placeholder:"Name"})}}])&&D(n.prototype,r),i&&D(n,i),t}();n(38);function V(e){return(V="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t){return!t||"object"!==V(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t){return(I=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var U=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;var B=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Q(this,A(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&I(e,t)}(t,R),n=t,(r=[{key:"validate",value:function(e){return t=e,U.test(t)&&""!==t;var t}},{key:"render",value:function(){var e="contact-form__email ".concat(this.state.error?"contact-form__email_error":"");return o.a.createElement("input",{className:e,name:"email",value:this.state.value,type:"email",onChange:this.onChange,required:!0,placeholder:"Email"})}}])&&F(n.prototype,r),i&&F(n,i),t}();n(39);var W,q=function(e){var t=e.buttons;return o.a.createElement("div",{className:"contact-form__button-set"},t.filter(function(e){return e.isVisible}).map(function(e){return o.a.createElement("button",{className:e.className,key:"button_"+e.name,type:e.type,name:e.name,onClick:e.onClick},e.label)}))};n(16);function X(e){return(X="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $(e,t){return!t||"object"!==X(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e,t,n,r,o){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var K=(G((W=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=$(this,(e=J(t)).call.apply(e,[this].concat(o)))).state={message:null},n}var n,i,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(t,r["Component"]),n=t,(i=[{key:"getValues",value:function(){return{name:this.name.value,email:this.email.value}}},{key:"componentDidMount",value:function(){var e=this.props,t=e.id,n=e.contactStore,r=e.isNew;if(n.contacts.some(function(e){return e.id===t})){var o=n.contacts.find(function(e){return e.id===t});this.email.value=o.email,this.name.value=o.name}else"new"===t&&(this.email.value="",this.name.value="");r?this.props.pageStore.viewNewContactPage():this.props.pageStore.viewEditContactPage()}},{key:"setEmailRef",value:function(e){this.email=e}},{key:"setNameRef",value:function(e){this.name=e}},{key:"buttonsData",value:function(){return[{className:"button-set__delete-button",name:"delete",onClick:this.onDeleteClick,isVisible:!this.props.isNew,type:"button",label:"Delete"},{className:"button-set__save-button",name:"save",onClick:this.onSaveClick,isVisible:!0,type:"submit",label:"Ok"},{className:"button-set__cancel-button",name:"cancel",onClick:this.onCancelClick,isVisible:!0,type:"button",label:"Cancel"}]}},{key:"isValid",value:function(){return this.name.isValid()&this.email.isValid()}},{key:"onSaveClick",value:function(){var e=this,t=this.props,n=t.isNew,r=t.id;this.isValid()&&(this.setState({message:n?"Creating":"Updating"}),this.props.contactStore[n?"create":"update"](r,this.getValues()).then(function(){e.navigateToMainPage()}))}},{key:"navigateToMainPage",value:function(){var e=this.props,t=e.history,n=e.match;t.replace(n.url.slice(0,n.url.lastIndexOf("/")))}},{key:"onDeleteClick",value:function(){var e=this;this.setState({message:"Deleting"}),this.props.contactStore.delete(this.props.id).then(function(){e.navigateToMainPage()})}},{key:"onCancelClick",value:function(){this.navigateToMainPage()}},{key:"render",value:function(){return this.state.message?this.state.message:o.a.createElement("div",{className:"contact-form"},o.a.createElement(L,{ref:this.setNameRef}),o.a.createElement(B,{ref:this.setEmailRef}),o.a.createElement(q,{buttons:this.buttonsData()}))}}])&&Z(n.prototype,i),a&&Z(n,a),t}()).prototype,"setEmailRef",[E.a],Object.getOwnPropertyDescriptor(W.prototype,"setEmailRef"),W.prototype),G(W.prototype,"setNameRef",[E.a],Object.getOwnPropertyDescriptor(W.prototype,"setNameRef"),W.prototype),G(W.prototype,"buttonsData",[E.a],Object.getOwnPropertyDescriptor(W.prototype,"buttonsData"),W.prototype),G(W.prototype,"onSaveClick",[E.a],Object.getOwnPropertyDescriptor(W.prototype,"onSaveClick"),W.prototype),G(W.prototype,"onDeleteClick",[E.a],Object.getOwnPropertyDescriptor(W.prototype,"onDeleteClick"),W.prototype),G(W.prototype,"onCancelClick",[E.a],Object.getOwnPropertyDescriptor(W.prototype,"onCancelClick"),W.prototype),W),Y=Object(c.b)("contactStore","pageStore")(Object(c.c)(K));function ee(e){return(ee="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function te(){return(te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function re(e,t){return!t||"object"!==ee(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ae,ce,ue=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=re(this,(e=oe(t)).call.apply(e,[this].concat(o)))).state={isNew:!0,id:null},n}var n,i,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ie(e,t)}(t,r["Component"]),n=t,(i=[{key:"componentDidMount",value:function(){var e=this.props.match.params.contactId;this.props.contactStore.contacts.some(function(t){return t.id===e})?this.setState({id:e,isNew:!1}):"new"===e&&this.setState({isNew:!0,id:_()()})}},{key:"componentWillUnmount",value:function(){this.props.contactStore.research()}},{key:"render",value:function(){return this.state.id?o.a.createElement(Y,te({},this.props,{id:this.state.id,isNew:this.state.isNew})):"Not Found"}}])&&ne(n.prototype,i),a&&ne(n,a),t}(),le=Object(c.b)("contactStore","pageStore")(Object(c.c)(ue)),se=n(9),fe=n.n(se),pe=(n(40),n(27)),ye=n.n(pe);function be(e){return(be="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function he(){return(he=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ve(e,t){return!t||"object"!==be(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function de(e){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ge(e,t){return(ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function we(e){return(we="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _e(e,t,n){return t&&je(e.prototype,t),n&&je(e,n),e}function Ee(e,t){return!t||"object"!==we(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Se(e){return(Se=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ke(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pe(e,t)}function Pe(e,t){return(Pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ce(e,t,n,r,o){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var ze,Re,Ne,De=(Ce((ae=function(e){function t(){return Oe(this,t),Ee(this,Se(t).apply(this,arguments))}return ke(t,r["Component"]),_e(t,[{key:"componentDidMount",value:function(){this.searchElement.getValue().value=this.props.contactStore.filterQuery,this.search=ye()(this.props.contactStore.search,700)}},{key:"componentDidUpdate",value:function(){var e=this.props.contactStore.filterQuery;this.searchElement.getValue().value!==e&&(this.searchElement.getValue().value=e)}},{key:"onFilterQueryChange",value:function(e){this.search(e.target.value)}},{key:"setRef",value:function(e){this.searchElement=e}},{key:"render",value:function(){return o.a.createElement(Te,{onChange:this.onFilterQueryChange,ref:this.setRef})}}]),t}()).prototype,"onFilterQueryChange",[E.a],Object.getOwnPropertyDescriptor(ae.prototype,"onFilterQueryChange"),ae.prototype),Ce(ae.prototype,"setRef",[E.a],Object.getOwnPropertyDescriptor(ae.prototype,"setRef"),ae.prototype),ae),Te=(Ce((ce=function(e){function t(){return Oe(this,t),Ee(this,Se(t).apply(this,arguments))}return ke(t,r["PureComponent"]),_e(t,[{key:"getValue",value:function(){return this.searchElement}},{key:"setRef",value:function(e){this.searchElement=e}},{key:"render",value:function(){return o.a.createElement("input",{type:"text",onChange:this.props.onChange,ref:this.setRef})}}]),t}()).prototype,"setRef",[E.a],Object.getOwnPropertyDescriptor(ce.prototype,"setRef"),ce.prototype),ce),xe=Object(c.b)("contactStore")(Object(c.c)((ze="contactStore",Re="filterQuery",Ne=De,function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ve(this,de(t).apply(this,arguments))}var n,i,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ge(e,t)}(t,r.Component),n=t,(i=[{key:"render",value:function(){var e=this.props[ze][Re];return o.a.createElement(Ne,he({},this.props,{changedProperty:e}))}}])&&me(n.prototype,i),a&&me(n,a),t}()))),Me={search:o.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},o.a.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),o.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"})),spinner:o.a.createElement("svg",{version:"1.1",id:"loader-1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"40px",height:"40px",viewBox:"0 0 40 40",enableBackground:"new 0 0 40 40",space:"preserve"},o.a.createElement("path",{opacity:"0.2",fill:"#000",d:"M20.201,5.169c-8.254,0-14.946,6.692-14.946,14.946c0,8.255,6.692,14.946,14.946,14.946\r s14.946-6.691,14.946-14.946C35.146,11.861,28.455,5.169,20.201,5.169z M20.201,31.749c-6.425,0-11.634-5.208-11.634-11.634\r c0-6.425,5.209-11.634,11.634-11.634c6.425,0,11.633,5.209,11.633,11.634C31.834,26.541,26.626,31.749,20.201,31.749z"}),o.a.createElement("path",{fill:"#000",d:"M26.013,10.047l1.654-2.866c-2.198-1.272-4.743-2.012-7.466-2.012h0v3.312h0\r C22.32,8.481,24.301,9.057,26.013,10.047z"},o.a.createElement("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 20 20",to:"360 20 20",dur:"0.5s",repeatCount:"indefinite"})))};var Le=function(e){return Me[e.name]};var Ve=Object(c.b)("contactStore")(Object(c.c)(function(e){return o.a.createElement(Le,{name:e.contactStore.filtering?"spinner":"search"})}));function Fe(e){return(Fe="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ae(e,t){return!t||"object"!==Fe(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ie(e){return(Ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ue(e,t){return(Ue=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Be=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ae(this,Ie(t).apply(this,arguments))}var n,i,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ue(e,t)}(t,r["PureComponent"]),n=t,(i=[{key:"render",value:function(){return o.a.createElement("button",{className:"search-container__close-button",onClick:this.props.onClick},"X")}}])&&Qe(n.prototype,i),a&&Qe(n,a),t}(),We=Object(c.b)("contactStore")(Object(c.c)(function(){return""!==this.props.contactStore.filterQuery?o.a.createElement(Be,{onClick:this.props.contactStore.clearSearch}):o.a.createElement(r.Fragment,null)}));var qe,Xe=function(){return o.a.createElement("div",{className:"search-container"},o.a.createElement(xe,null),o.a.createElement(Ve,null),o.a.createElement(We,null))};n(20),n(49);function Ze(e){return(Ze="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Je(e,t){return!t||"object"!==Ze(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function He(e){return(He=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ge(e,t){return(Ge=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ke=(function(e,t,n,r,o){var i={};Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null)}((qe=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Je(this,(e=He(t)).call.apply(e,[this].concat(o)))).state={message:null},n}var n,i,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ge(e,t)}(t,r["Component"]),n=t,(i=[{key:"onDeleteClick",value:function(){var e=this;this.props.contactStore.delete(this.props.id).then(function(){e.props.pageStore.closeContactForm()}),this.setState({message:"Deleting..."})}},{key:"render",value:function(){return o.a.createElement("div",{className:"contact-list-item"},o.a.createElement("div",{className:"contact-list-item__info"},o.a.createElement(fe.a,{to:"/".concat(this.props.id)},o.a.createElement("div",{className:"contact-list-item__name"},this.props.name)),o.a.createElement("div",{className:"contact-list-item__email"},this.props.email)),o.a.createElement("div",{className:"contact-list-item__right-part"},o.a.createElement("div",{className:"contact-list-item__message"},o.a.createElement("span",null,this.state.message)),o.a.createElement("div",{className:"contact-list-item__actions"},this.state.message&&o.a.createElement("div",{className:"contact-list-item__spinner"},o.a.createElement(Le,{name:"spinner"})),o.a.createElement("button",{onClick:this.onDeleteClick},"X"))))}}])&&$e(n.prototype,i),a&&$e(n,a),t}()).prototype,"onDeleteClick",[E.a],Object.getOwnPropertyDescriptor(qe.prototype,"onDeleteClick"),qe.prototype),qe),Ye=Object(c.b)("contactStore","pageStore")(Ke);var et=Object(c.b)("contactStore")(Object(c.c)(function(e){var t=e.contactStore,n=t.contacts,r=t.filterResult;return(""!==t.filterQuery?r:n).map(function(e){return o.a.createElement(Ye,{id:e.id,name:e.name,key:"contact-list-item"+e.id,email:e.email})})}));var tt=Object(c.b)("contactStore")(Object(c.c)(function(){return o.a.createElement("div",{className:"contact-list"},o.a.createElement(Xe,null),o.a.createElement("div",{className:"contact-list__content"},o.a.createElement(et,null),o.a.createElement(fe.a,{to:"/new"},o.a.createElement("button",{className:"contact-list__add-button"},"+"))))}));function nt(e){return(nt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rt(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function it(e,t){return!t||"object"!==nt(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function at(e){return(at=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ct(e,t){return(ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ut=function(e){return function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),it(this,at(n).apply(this,arguments))}var i,a,c;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ct(e,t)}(n,r.Component),i=n,(a=[{key:"render",value:function(){var t=this.props,n=t.loading,r=rt(t,["loading"]);return n?"Loading":o.a.createElement(e,r)}}])&&ot(i.prototype,a),c&&ot(i,c),n}()}(g()(function(e){var t=e.match;return o.a.createElement(r.Fragment,null,o.a.createElement(O.a,{component:tt,path:"".concat(t.url,"/")}),o.a.createElement(O.a,{component:le,path:"/:contactId/"}))}));function lt(e){return(lt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function st(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ft(e,t){return!t||"object"!==lt(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pt(e){return(pt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function yt(e,t){return(yt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var bt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),ft(this,pt(t).apply(this,arguments))}var n,i,a;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yt(e,t)}(t,r["Component"]),n=t,(i=[{key:"componentDidMount",value:function(){this.props.contactStore.fetchContacts()}},{key:"render",value:function(){return o.a.createElement(ut,{loading:this.props.contactStore.loading})}}])&&st(n.prototype,i),a&&st(n,a),t}(),ht=g()(Object(c.b)("contactStore","pageStore")(Object(c.c)(bt)));n(58);var mt=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(v,null),o.a.createElement(l.a,null,o.a.createElement(ht,null)))},vt=n(1),dt=function(){self.addEventListener("message",function(e){var t=e.data.payload;switch(e.data.type){case"FILTER":var n=t.query,r=t.contacts,o=n.toLowerCase(),i=function(e){return e.toLowerCase().includes(o)},a=r.filter(function(e){return i(e.name)||i(e.email)});postMessage({type:"FILTER_RESULT",payload:{filterResult:a}})}})};var gt=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t.toString(),r=new Blob(["("+n+")()"]);return new Worker(URL.createObjectURL(r))},wt=n(14),Ot=n.n(wt);n(65);Ot.a.initializeApp({databaseURL:"https://address-book-app-8cc63.firebaseio.com"});var jt,_t,Et,St,kt,Pt,Ct,zt,Rt,Nt=Ot.a.database(),Dt=function(e,t,n){return Nt.ref().update((r={},o="".concat(e,"/").concat(t),i=n,o in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i,r));var r,o,i},Tt="contacts",xt=function(){return function(e){return Nt.ref(e).once("value")}(Tt)},Mt=function(e,t){return function(e,t,n){return Nt.ref("".concat(e,"/").concat(t)).set(n)}(Tt,e,t)},Lt=function(e,t){return Dt(Tt,e,t)},Vt=function(e){return function(e,t){return Nt.ref("".concat(e,"/").concat(t)).remove()}(Tt,e)};function Ft(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Qt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function At(e,t,n,r,o){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var It,Ut,Bt,Wt=(jt=vt.d.bound,_t=vt.d.bound,Et=vt.d.bound,kt=At((St=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ft(this,"contacts",kt,this),Ft(this,"loading",Pt,this),Ft(this,"filterQuery",Ct,this),Ft(this,"filterResult",zt,this),Ft(this,"filtering",Rt,this),this.worker=new gt(dt),this.worker.addEventListener("message",function(e){var n=e.data.payload;switch(e.data.type){case"FILTER_RESULT":t.filterResult=n.filterResult,t.filtering=!1}})}var t,n,r;return t=e,(n=[{key:"fetchContacts",value:function(){var e=this;xt().then(function(t){var n=t.val();if(n)for(var r=Object.keys(n),o=r.length,i=0;i<o;i++){var a=r[i],c=n[a];e.contacts.push(Object.assign(c,{id:a}))}e.loading=!1})}},{key:"add",value:function(e){this.contacts.push(e)}},{key:"search",value:function(e){this.filtering=!0,""===e?this.clearSearch():(this.filterQuery=e,this.worker.postMessage({type:"FILTER",payload:{query:e,contacts:Object(vt.m)(this.contacts)}}))}},{key:"research",value:function(){this.filtering=!0,""===this.filterQuery?this.clearSearch():this.worker.postMessage({type:"FILTER",payload:{query:this.filterQuery,contacts:Object(vt.m)(this.contacts)}})}},{key:"clearSearch",value:function(){this.filterQuery="",this.filterResult=[],this.filtering=!1}},{key:"create",value:function(e,t){var n=this;return Mt(e,t).then(function(){n.contacts.push(Object.assign(t,{id:e}))})}},{key:"update",value:function(e,t){var n=this;return Lt(e,t).then(function(){var r=n.contacts.findIndex(function(t){return t.id===e});n.contacts[r]=Object.assign(t,{id:e})})}},{key:"delete",value:function(e){var t=this;return Vt(e).then(function(){var n=t.contacts.findIndex(function(t){return t.id===e});t.contacts.splice(n,1)})}}])&&Qt(t.prototype,n),r&&Qt(t,r),e}()).prototype,"contacts",[vt.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Pt=At(St.prototype,"loading",[vt.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),Ct=At(St.prototype,"filterQuery",[vt.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),zt=At(St.prototype,"filterResult",[vt.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Rt=At(St.prototype,"filtering",[vt.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),At(St.prototype,"fetchContacts",[vt.d],Object.getOwnPropertyDescriptor(St.prototype,"fetchContacts"),St.prototype),At(St.prototype,"add",[vt.d],Object.getOwnPropertyDescriptor(St.prototype,"add"),St.prototype),At(St.prototype,"search",[jt],Object.getOwnPropertyDescriptor(St.prototype,"search"),St.prototype),At(St.prototype,"research",[_t],Object.getOwnPropertyDescriptor(St.prototype,"research"),St.prototype),At(St.prototype,"clearSearch",[Et],Object.getOwnPropertyDescriptor(St.prototype,"clearSearch"),St.prototype),At(St.prototype,"create",[vt.d],Object.getOwnPropertyDescriptor(St.prototype,"create"),St.prototype),At(St.prototype,"update",[vt.d],Object.getOwnPropertyDescriptor(St.prototype,"update"),St.prototype),At(St.prototype,"delete",[vt.d],Object.getOwnPropertyDescriptor(St.prototype,"delete"),St.prototype),St);function qt(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Xt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zt(e,t,n,r,o){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var $t=(Ut=Zt((It=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),qt(this,"nextRoute",Ut,this),qt(this,"status",Bt,this)}var t,n,r;return t=e,(n=[{key:"closeContactForm",value:function(){this.nextRoute="/"}},{key:"viewMainPage",value:function(){this.status="",this.nextRoute=null}},{key:"viewEditContactPage",value:function(){this.status="/ Edit contact"}},{key:"viewNewContactPage",value:function(){this.status="/ New contact"}}])&&Xt(t.prototype,n),r&&Xt(t,r),e}()).prototype,"nextRoute",[vt.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Bt=Zt(It.prototype,"status",[vt.k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Zt(It.prototype,"closeContactForm",[vt.d],Object.getOwnPropertyDescriptor(It.prototype,"closeContactForm"),It.prototype),Zt(It.prototype,"viewMainPage",[vt.d],Object.getOwnPropertyDescriptor(It.prototype,"viewMainPage"),It.prototype),Zt(It.prototype,"viewEditContactPage",[vt.d],Object.getOwnPropertyDescriptor(It.prototype,"viewEditContactPage"),It.prototype),Zt(It.prototype,"viewNewContactPage",[vt.d],Object.getOwnPropertyDescriptor(It.prototype,"viewNewContactPage"),It.prototype),It),Jt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Ht(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var Gt={contactStore:new Wt,pageStore:new $t};a.a.render(o.a.createElement(c.a,Gt,o.a.createElement(mt,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat(/address_book_app/,"/service-worker.js");Jt?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Ht(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):Ht(e)})}}()}},[[68,1,2,3]]]);