(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{16:function(e,t,n){},24:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},64:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){"use strict";n.r(t);var r,o,i,a=n(0),c=n.n(a),u=n(7),l=n.n(u),s=n(3),f=n(28),p=n.n(f),y=(n(33),n(1)),b=n.n(y),h=n(2);function v(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n,r,o){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var g=(o=d((r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),v(this,"nextRoute",o,this),v(this,"status",i,this)}var t,n,r;return t=e,(n=[{key:"closeContactForm",value:function(){this.nextRoute="/"}},{key:"viewMainPage",value:function(){this.status="",this.nextRoute=null}},{key:"viewEditContactPage",value:function(){this.status="/ Edit contact"}},{key:"viewNewContactPage",value:function(){this.status="/ New contact"}}])&&m(t.prototype,n),r&&m(t,r),e}()).prototype,"nextRoute",[h.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),i=d(r.prototype,"status",[h.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),d(r.prototype,"closeContactForm",[h.d],Object.getOwnPropertyDescriptor(r.prototype,"closeContactForm"),r.prototype),d(r.prototype,"viewMainPage",[h.d],Object.getOwnPropertyDescriptor(r.prototype,"viewMainPage"),r.prototype),d(r.prototype,"viewEditContactPage",[h.d],Object.getOwnPropertyDescriptor(r.prototype,"viewEditContactPage"),r.prototype),d(r.prototype,"viewNewContactPage",[h.d],Object.getOwnPropertyDescriptor(r.prototype,"viewNewContactPage"),r.prototype),r);function O(e){var t=e.pageStore;return c.a.createElement(a.Fragment,null,t.status)}O.propTypes={pageStore:b.a.instanceOf(g).isRequired};var w=Object(s.b)("pageStore")(Object(s.c)(O));var j,E=function(){return c.a.createElement("header",{className:"App-header"},c.a.createElement("h1",{className:"App-title"},"My Address Book",c.a.createElement(w,null)))},k=n(11),_=n.n(k),S=n(10),P=n.n(S),C=n(26),R=n.n(C),z=n(4);function D(e){return(D="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t){return!t||"object"!==D(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function x(e){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e,t){return(q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e,t,n,r,o){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var V=(M((j=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=N(this,(e=x(t)).call.apply(e,[this].concat(o)))).state={value:"",error:!1},n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q(e,t)}(t,c.a.Component),n=t,(r=[{key:"onChange",value:function(e){var t=this;this.setState({value:e.target.value},function(){t.isValid()})}},{key:"isValid",value:function(){var e=this.state.value,t=!(0,this.props.validate)(e);return this.setState({error:t}),!t}},{key:"value",get:function(){return this.state.value},set:function(e){this.setState({value:e})}}])&&T(n.prototype,r),o&&T(n,o),t}()).prototype,"onChange",[z.a],Object.getOwnPropertyDescriptor(j.prototype,"onChange"),j.prototype),M(j.prototype,"isValid",[z.a],Object.getOwnPropertyDescriptor(j.prototype,"isValid"),j.prototype),j);V.propTypes={validate:b.a.func.isRequired};var F=V;function L(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Q(){return(Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function A(e,t){return function(e){return c.a.forwardRef(function(t,n){return c.a.createElement(e,Q({},t,{forwardedRef:n}))})}(function(e,t){return function(n){var r=n.forwardedRef,o=L(n,["forwardedRef"]);return c.a.createElement(e,Q({ref:r},o,{validate:t}))}}(t,e))}n(38);function I(e){return(I="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e,t){return!t||"object"!==I(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Z=A(function(e){return""!==e},function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),W(this,B(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(t,F),n=t,(r=[{key:"render",value:function(){var e=this.state,t=e.value,n=e.error,r="contact-form__name ".concat(n?"contact-form__name_error":"");return c.a.createElement("input",{className:r,name:"name",value:t,type:"text",required:!0,onChange:this.onChange,placeholder:"Name"})}}])&&U(n.prototype,r),o&&U(n,o),t}());n(39);function $(e){return($="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(e,t){return!t||"object"!==$(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e,t){return(K=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Y=/^[a-zA-Z0-9.!#$%&'*+\/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/;var ee=A(function(e){return Y.test(e)&&""!==e},function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),H(this,G(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&K(e,t)}(t,F),n=t,(r=[{key:"render",value:function(){var e="contact-form__email ".concat(this.state.error?"contact-form__email_error":"");return c.a.createElement("input",{className:e,name:"email",value:this.state.value,type:"email",onChange:this.onChange,required:!0,placeholder:"Email"})}}])&&J(n.prototype,r),o&&J(n,o),t}());n(40);function te(e){var t=e.buttons;return c.a.createElement("div",{className:"contact-form__button-set"},t.filter(function(e){return e.isVisible}).map(function(e){return c.a.createElement("button",{className:e.className,key:"button_".concat(e.name),type:"button",name:e.name,onClick:e.onClick},e.label)}))}te.propTypes={buttons:b.a.arrayOf(b.a.shape({className:b.a.string.isRequired,name:b.a.string.isRequired,onClick:b.a.func.isRequired,label:b.a.string.isRequired,isVisible:b.a.bool.isRequired})).isRequired};var ne=te,re=(n(16),function(){self.addEventListener("message",function(e){var t=e.data.payload;switch(e.data.type){case"FILTER":var n=t.query,r=t.contacts,o=t.filterResult,i=n.toLowerCase(),a=function(e){return e.toLowerCase().includes(i)},c=r.filter(function(e){return a(e.name)||a(e.email)}),u=null===o||!function(e,t){var n=e.length;if(n!==t.length)return!1;for(var r=0;r<n;r++)for(var o=e[r],i=t[r],a=Object.keys(o),c=a.length,u=0;u<c;u++){var l=a[u];if(!hasOwnProperty.call(i,l))return!1;if(o[l]!==i[l])return!1}return!0}(o,c);postMessage({type:"FILTER_RESULT",payload:{filterResult:c,refresh:u}})}})});var oe=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t.toString(),r=new Blob(["(".concat(n,")()")]);return new Worker(URL.createObjectURL(r))},ie=n(14),ae=n.n(ie);n(45);ae.a.initializeApp({databaseURL:"https://address-book-app-8cc63.firebaseio.com"});var ce,ue,le,se,fe,pe,ye,be,he,ve=ae.a.database(),me=function(e,t,n){return ve.ref().update((r={},o="".concat(e,"/").concat(t),i=n,o in r?Object.defineProperty(r,o,{value:i,enumerable:!0,configurable:!0,writable:!0}):r[o]=i,r));var r,o,i},de="contacts",ge=function(){return function(e){return ve.ref(e).once("value")}(de)},Oe=function(e,t){return function(e,t,n){return ve.ref("".concat(e,"/").concat(t)).set(n)}(de,e,t)},we=function(e,t){return me(de,e,t)},je=function(e){return function(e,t){return ve.ref("".concat(e,"/").concat(t)).remove()}(de,e)};function Ee(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _e(e,t,n,r,o){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var Se,Pe=(ce=h.d.bound,ue=h.d.bound,le=h.d.bound,fe=_e((se=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ee(this,"contacts",fe,this),Ee(this,"loading",pe,this),Ee(this,"filterQuery",ye,this),Ee(this,"filterResult",be,this),Ee(this,"filtering",he,this)}var t,n,r;return t=e,(n=[{key:"initWorker",value:function(){var e=this;this.worker=new oe(re),this.worker.addEventListener("message",function(t){var n=t.data.payload;switch(t.data.type){case"FILTER_RESULT":n.refresh&&(e.filterResult=n.filterResult),e.filtering=!1}})}},{key:"fetchContacts",value:function(){var e=this;ge().then(function(t){var n=t.val();if(n)for(var r=Object.keys(n),o=r.length,i=0;i<o;i++){var a=r[i],c=n[a];e.contacts.push(Object.assign(c,{id:a}))}e.loading=!1})}},{key:"add",value:function(e){this.contacts.push(e)}},{key:"search",value:function(e){this.filtering=!0,""===e?this.clearSearch():(this.filterQuery=e,this.worker.postMessage({type:"FILTER",payload:{query:e,contacts:Object(h.n)(this.contacts),filterResult:Object(h.n)(this.filterResult)}}))}},{key:"research",value:function(){this.filtering=!0,""===this.filterQuery?this.clearSearch():this.worker.postMessage({type:"FILTER",payload:{query:this.filterQuery,contacts:Object(h.n)(this.contacts)}})}},{key:"clearSearch",value:function(){this.filterQuery="",this.filterResult=null,this.filtering=!1}},{key:"create",value:function(e,t){var n=this;return Oe(e,t).then(function(){n.contacts.push(Object.assign(t,{id:e}))})}},{key:"update",value:function(e,t){var n=this;return we(e,t).then(function(){var r=n.contacts.findIndex(function(t){return t.id===e});n.contacts[r]=Object.assign(t,{id:e})})}},{key:"delete",value:function(e){var t=this;return je(e).then(function(){var n=t.contacts.findIndex(function(t){return t.id===e});t.contacts.splice(n,1)})}},{key:"actualContacts",get:function(){return""!==this.filterQuery&&this.filterResult?this.filterResult:this.contacts}}])&&ke(t.prototype,n),r&&ke(t,r),e}()).prototype,"contacts",[h.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),pe=_e(se.prototype,"loading",[h.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ye=_e(se.prototype,"filterQuery",[h.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),be=_e(se.prototype,"filterResult",[h.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),he=_e(se.prototype,"filtering",[h.l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_e(se.prototype,"fetchContacts",[h.d],Object.getOwnPropertyDescriptor(se.prototype,"fetchContacts"),se.prototype),_e(se.prototype,"add",[h.d],Object.getOwnPropertyDescriptor(se.prototype,"add"),se.prototype),_e(se.prototype,"search",[ce],Object.getOwnPropertyDescriptor(se.prototype,"search"),se.prototype),_e(se.prototype,"research",[ue],Object.getOwnPropertyDescriptor(se.prototype,"research"),se.prototype),_e(se.prototype,"clearSearch",[le],Object.getOwnPropertyDescriptor(se.prototype,"clearSearch"),se.prototype),_e(se.prototype,"create",[h.d],Object.getOwnPropertyDescriptor(se.prototype,"create"),se.prototype),_e(se.prototype,"update",[h.d],Object.getOwnPropertyDescriptor(se.prototype,"update"),se.prototype),_e(se.prototype,"delete",[h.d],Object.getOwnPropertyDescriptor(se.prototype,"delete"),se.prototype),_e(se.prototype,"actualContacts",[h.e],Object.getOwnPropertyDescriptor(se.prototype,"actualContacts"),se.prototype),se);function Ce(e){return(Ce="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ze(e,t){return!t||"object"!==Ce(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function De(e){return(De=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Te(e,t){return(Te=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ne(e,t,n,r,o){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var xe=(Ne((Se=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=ze(this,(e=De(t)).call.apply(e,[this].concat(o)))).state={message:null},n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Te(e,t)}(t,a["Component"]),n=t,(r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.id,n=e.contactStore;if(n.contacts.some(function(e){return e.id===t})){var r=n.contacts.find(function(e){return e.id===t});this.email.value=r.email,this.name.value=r.name}else"new"===t&&(this.email.value="",this.name.value="")}},{key:"onSaveClick",value:function(){var e=this,t=this.props,n=t.isNew,r=t.id,o=t.contactStore;this.isValid()&&(this.setState({message:n?"Creating":"Updating"}),o[n?"create":"update"](r,this.getValues()).then(function(){e.navigateToMainPage()}))}},{key:"onDeleteClick",value:function(){var e=this,t=this.props,n=t.contactStore,r=t.id;this.setState({message:"Deleting"}),n.delete(r).then(function(){e.navigateToMainPage()})}},{key:"onCancelClick",value:function(){this.navigateToMainPage()}},{key:"getValues",value:function(){return{name:this.name.value,email:this.email.value}}},{key:"setEmailRef",value:function(e){this.email=e}},{key:"setNameRef",value:function(e){this.name=e}},{key:"buttonsData",value:function(){var e=this.props.isNew;return[{className:"button-set__delete-button",name:"delete",onClick:this.onDeleteClick,isVisible:!e,label:"Delete"},{className:"button-set__save-button",name:"save",onClick:this.onSaveClick,isVisible:!0,label:"Ok"},{className:"button-set__cancel-button",name:"cancel",onClick:this.onCancelClick,isVisible:!0,label:"Cancel"}]}},{key:"isValid",value:function(){return this.name.isValid()&this.email.isValid()}},{key:"navigateToMainPage",value:function(){var e=this.props,t=e.history,n=e.match;t.replace(n.url.slice(0,n.url.lastIndexOf("/")))}},{key:"render",value:function(){var e=this.state.message;return e||c.a.createElement("div",{className:"contact-form"},c.a.createElement(Z,{ref:this.setNameRef}),c.a.createElement(ee,{ref:this.setEmailRef}),c.a.createElement(ne,{buttons:this.buttonsData()}))}}])&&Re(n.prototype,r),o&&Re(n,o),t}()).prototype,"onSaveClick",[z.a],Object.getOwnPropertyDescriptor(Se.prototype,"onSaveClick"),Se.prototype),Ne(Se.prototype,"onDeleteClick",[z.a],Object.getOwnPropertyDescriptor(Se.prototype,"onDeleteClick"),Se.prototype),Ne(Se.prototype,"onCancelClick",[z.a],Object.getOwnPropertyDescriptor(Se.prototype,"onCancelClick"),Se.prototype),Ne(Se.prototype,"setEmailRef",[z.a],Object.getOwnPropertyDescriptor(Se.prototype,"setEmailRef"),Se.prototype),Ne(Se.prototype,"setNameRef",[z.a],Object.getOwnPropertyDescriptor(Se.prototype,"setNameRef"),Se.prototype),Ne(Se.prototype,"buttonsData",[z.a],Object.getOwnPropertyDescriptor(Se.prototype,"buttonsData"),Se.prototype),Se);xe.propTypes={contactStore:b.a.instanceOf(Pe).isRequired,history:b.a.shape({replace:b.a.func.isRequired}).isRequired,id:b.a.string.isRequired,isNew:b.a.bool.isRequired,match:b.a.shape({url:b.a.string.isRequired}).isRequired};var qe=Object(s.b)("contactStore")(Object(s.c)(xe));function Me(e){return(Me="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ve(){return(Ve=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Le(e,t){return!t||"object"!==Me(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qe(e){return(Qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ae(e,t){return(Ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ie,Ue=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Le(this,(e=Qe(t)).call.apply(e,[this].concat(o)))).state={isNew:!0,id:null},n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ae(e,t)}(t,a["Component"]),n=t,(r=[{key:"componentDidMount",value:function(){var e=this.props,t=e.pageStore,n=e.contactStore,r=e.match.params.contactId;n.contacts.some(function(e){return e.id===r})?(t.viewEditContactPage(),this.setState({isNew:!1,id:r})):"new"===r&&(t.viewNewContactPage(),this.setState({isNew:!0,id:R()()}))}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.contactStore,n=e.pageStore;t.research(),n.viewMainPage()}},{key:"render",value:function(){var e=this.state,t=e.id,n=e.isNew;return t?c.a.createElement(qe,Ve({},this.props,{id:t,isNew:n})):"Not Found"}}])&&Fe(n.prototype,r),o&&Fe(n,o),t}(),We=Object(s.b)("contactStore","pageStore")(Object(s.c)(Ue)),Be=n(9),Xe=n.n(Be),Ze=n(27),$e=n.n(Ze);function Je(){return(Je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function He(e){return(He="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ge(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ke(e,t){return!t||"object"!==He(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ye(e){return(Ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function et(e,t){return(et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var tt=(function(e,t,n,r,o){var i={};Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null)}((Ie=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ke(this,Ye(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&et(e,t)}(t,a["PureComponent"]),n=t,(r=[{key:"getValue",value:function(){return this.searchElement}},{key:"setRef",value:function(e){this.searchElement=e}},{key:"render",value:function(){var e=this.props.onChange;return c.a.createElement("input",{type:"text",onChange:e,ref:this.setRef})}}])&&Ge(n.prototype,r),o&&Ge(n,o),t}()).prototype,"setRef",[z.a],Object.getOwnPropertyDescriptor(Ie.prototype,"setRef"),Ie.prototype),Ie);tt.propTypes={onChange:b.a.func.isRequired};var nt,rt=tt;function ot(e){return(ot="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function it(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function at(e,t){return!t||"object"!==ot(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ct(e){return(ct=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ut(e,t){return(ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function lt(e,t,n,r,o){var i={};return Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var st=(lt((nt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),at(this,ct(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ut(e,t)}(t,a["Component"]),n=t,(r=[{key:"componentDidMount",value:function(){var e=this.props.contactStore;this.searchElement.getValue().value=e.filterQuery,this.search=$e()(e.search,700)}},{key:"componentDidUpdate",value:function(){var e=this.props.contactStore.filterQuery;this.searchElement.getValue().value!==e&&(this.searchElement.getValue().value=e)}},{key:"onFilterQueryChange",value:function(e){this.search(e.target.value)}},{key:"setRef",value:function(e){this.searchElement=e}},{key:"render",value:function(){return c.a.createElement(rt,{onChange:this.onFilterQueryChange,ref:this.setRef})}}])&&it(n.prototype,r),o&&it(n,o),t}()).prototype,"onFilterQueryChange",[z.a],Object.getOwnPropertyDescriptor(nt.prototype,"onFilterQueryChange"),nt.prototype),lt(nt.prototype,"setRef",[z.a],Object.getOwnPropertyDescriptor(nt.prototype,"setRef"),nt.prototype),nt);st.propTypes={contactStore:b.a.instanceOf(Pe).isRequired};var ft,pt,yt,bt=Object(s.b)("contactStore")(Object(s.c)((ft="contactStore",pt="filterQuery",yt=st,function(e){var t=e[ft][pt];return c.a.createElement(yt,Je({},e,{changedProperty:t}))}))),ht={search:c.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},c.a.createElement("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),c.a.createElement("path",{d:"M0 0h24v24H0z",fill:"none"})),spinner:c.a.createElement("svg",{version:"1.1",id:"loader-1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"40px",height:"40px",viewBox:"0 0 40 40",enableBackground:"new 0 0 40 40",space:"preserve"},c.a.createElement("path",{opacity:"0.2",fill:"#000",d:"M20.201,5.169c-8.254,0-14.946,6.692-14.946,14.946c0,8.255,6.692,14.946,14.946,14.946\r s14.946-6.691,14.946-14.946C35.146,11.861,28.455,5.169,20.201,5.169z M20.201,31.749c-6.425,0-11.634-5.208-11.634-11.634\r c0-6.425,5.209-11.634,11.634-11.634c6.425,0,11.633,5.209,11.633,11.634C31.834,26.541,26.626,31.749,20.201,31.749z"}),c.a.createElement("path",{fill:"#000",d:"M26.013,10.047l1.654-2.866c-2.198-1.272-4.743-2.012-7.466-2.012h0v3.312h0\r C22.32,8.481,24.301,9.057,26.013,10.047z"},c.a.createElement("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 20 20",to:"360 20 20",dur:"0.5s",repeatCount:"indefinite"})))};var vt=function(e){return ht[e.name]};function mt(e){var t=e.contactStore;return c.a.createElement(vt,{name:t.filtering?"spinner":"search"})}mt.propTypes={contactStore:b.a.instanceOf(Pe).isRequired};var dt=Object(s.b)("contactStore")(Object(s.c)(mt));function gt(e){return(gt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wt(e,t){return!t||"object"!==gt(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jt(e){return(jt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Et(e,t){return(Et=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kt(e){var t=e.contactStore;return""!==t.filterQuery?c.a.createElement(_t,{onClick:t.clearSearch}):c.a.createElement(a.Fragment,null)}kt.propTypes={contactStore:b.a.instanceOf(Pe).isRequired};var _t=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),wt(this,jt(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Et(e,t)}(t,a["PureComponent"]),n=t,(r=[{key:"render",value:function(){var e=this.props.onClick;return c.a.createElement("button",{className:"search-container__close-button",onClick:e,type:"button"},"X")}}])&&Ot(n.prototype,r),o&&Ot(n,o),t}();_t.propTypes={onClick:b.a.func.isRequired};var St=Object(s.b)("contactStore")(Object(s.c)(kt));n(56);var Pt,Ct=function(){return c.a.createElement("div",{className:"search-container"},c.a.createElement(bt,null),c.a.createElement(dt,null),c.a.createElement(St,null))};n(57);function Rt(e){return(Rt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dt(e,t){return!t||"object"!==Rt(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Tt(e){return(Tt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nt(e,t){return(Nt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var xt=(function(e,t,n,r,o){var i={};Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null)}((Pt=function(e){function t(){var e,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(n=Dt(this,(e=Tt(t)).call.apply(e,[this].concat(o)))).state={message:null},n}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nt(e,t)}(t,a["PureComponent"]),n=t,(r=[{key:"onDeleteClick",value:function(){var e=this.props,t=e.id,n=e.onDeleteClick;n(t),this.setState({message:"Deleting..."})}},{key:"render",value:function(){var e=this.props,t=e.name,n=e.email,r=e.id,o=this.state.message;return c.a.createElement("div",{className:"contact-list-item"},c.a.createElement("div",{className:"contact-list-item__info"},c.a.createElement(Xe.a,{to:"/".concat(r)},c.a.createElement("div",{className:"contact-list-item__name"},t)),c.a.createElement("div",{className:"contact-list-item__email"},n)),c.a.createElement("div",{className:"contact-list-item__right-part"},c.a.createElement("div",{className:"contact-list-item__message"},c.a.createElement("span",null,o)),c.a.createElement("div",{className:"contact-list-item__actions"},o&&c.a.createElement("div",{className:"contact-list-item__spinner"},c.a.createElement(vt,{name:"spinner"})),c.a.createElement("button",{onClick:this.onDeleteClick,type:"button"},"X"))))}}])&&zt(n.prototype,r),o&&zt(n,o),t}()).prototype,"onDeleteClick",[z.a],Object.getOwnPropertyDescriptor(Pt.prototype,"onDeleteClick"),Pt.prototype),Pt);xt.propTypes={id:b.a.string.isRequired,onDeleteClick:b.a.func.isRequired,name:b.a.string.isRequired,email:b.a.string.isRequired};var qt,Mt=xt;n(24);function Vt(e){return(Vt="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ft(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Lt(e,t){return!t||"object"!==Vt(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qt(e){return(Qt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function At(e,t){return(At=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var It=(function(e,t,n,r,o){var i={};Object.keys(r).forEach(function(e){i[e]=r[e]}),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce(function(n,r){return r(e,t,n)||n},i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null)}((qt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Lt(this,Qt(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&At(e,t)}(t,a["Component"]),n=t,(r=[{key:"onDeleteClick",value:function(e){var t=this.props,n=t.contactStore,r=t.pageStore;n.delete(e).then(function(){r.closeContactForm()})}},{key:"render",value:function(){var e=this;return this.props.contactStore.actualContacts.map(function(t){return c.a.createElement(Mt,{id:t.id,name:t.name,key:"contact-list-item".concat(t.id),email:t.email,onDeleteClick:e.onDeleteClick})})}}])&&Ft(n.prototype,r),o&&Ft(n,o),t}()).prototype,"onDeleteClick",[z.a],Object.getOwnPropertyDescriptor(qt.prototype,"onDeleteClick"),qt.prototype),qt);It.propTypes={contactStore:b.a.instanceOf(Pe).isRequired,pageStore:b.a.instanceOf(g).isRequired};var Ut=Object(s.b)("contactStore","pageStore")(Object(s.c)(It));var Wt=function(){return c.a.createElement("div",{className:"contact-list"},c.a.createElement(Ct,null),c.a.createElement("div",{className:"contact-list__content"},c.a.createElement(Ut,null),c.a.createElement(Xe.a,{to:"/new"},c.a.createElement("button",{className:"contact-list__add-button",type:"button"},"+"))))};function Bt(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Xt(e){var t=e.match;return c.a.createElement(a.Fragment,null,c.a.createElement(P.a,{component:Wt,path:"".concat(t.url,"/")}),c.a.createElement(P.a,{component:We,path:"/:contactId/"}))}Xt.propTypes={match:b.a.shape({url:b.a.string.isRequired}).isRequired};var Zt=function(e){return function(t){var n=t.loading,r=Bt(t,["loading"]);return n?c.a.createElement(a.Fragment,null,"Loading"):c.a.createElement(e,r)}}(_()(Xt));function $t(e){return($t="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ht(e,t){return!t||"object"!==$t(t)&&"function"!==typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Gt(e){return(Gt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kt(e,t){return(Kt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Yt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),Ht(this,Gt(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kt(e,t)}(t,a["Component"]),n=t,(r=[{key:"componentDidMount",value:function(){var e=this.props.contactStore;e.initWorker(),e.fetchContacts()}},{key:"render",value:function(){var e=this.props.contactStore;return c.a.createElement(Zt,{loading:e.loading})}}])&&Jt(n.prototype,r),o&&Jt(n,o),t}();Yt.propTypes={contactStore:b.a.instanceOf(Pe).isRequired};var en=_()(Object(s.b)("contactStore","pageStore")(Object(s.c)(Yt)));n(64);var tn=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(E,null),c.a.createElement(p.a,null,c.a.createElement(en,null)))},nn=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function rn(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}n(67);var on={contactStore:new Pe,pageStore:new g};l.a.render(c.a.createElement(s.a,on,c.a.createElement(tn,null)),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL(/address_book_app/,window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat(/address_book_app/,"/service-worker.js");nn?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):rn(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):rn(e)})}}()}},[[68,1,2]]]);